// ng-twitter-api - v0.1.5 (2015-09-02)
// http://www.devdactic.com
angular.module("twitter.functions",[]).factory("$twitterApi",["$q","$twitterHelpers","$http",function(a,b,c){function d(d,e,i){var j=a.defer();"undefined"==typeof i&&(i={}),"undefined"==typeof e&&(e={});var k=angular.extend(i,e);return b.createTwitterSignature("GET",d,k,g,h,f),c({method:"GET",url:d,params:k}).success(function(a,b,c,d){j.resolve(a)}).error(function(a,b,c,d){401===b&&(f=null),j.reject(b)}),j.promise}function e(d,e,i){var j=a.defer();"undefined"==typeof i&&(i={});var k=angular.extend(i,e);b.createTwitterSignature("POST",d,k,g,h,f);return k!=={}&&(d=d+"?"+b.transformRequest(k)),c.post(d,k).success(function(a,b,c,d){j.resolve(a)}).error(function(a,b,c,d){401===b&&(f=null),j.reject(b)}),j.promise}var f,g="",h="",i="https://api.twitter.com/1.1/statuses/home_timeline.json",j="https://api.twitter.com/1.1/search/tweets.json",k="https://api.twitter.com/1.1/statuses/update.json",l="https://api.twitter.com/1.1/statuses/mentions_timeline.json",m="https://api.twitter.com/1.1/statuses/user_timeline.json",n="https://api.twitter.com/1.1/users/show.json";return{configure:function(a,b,c){g=a,h=b,f=c},getHomeTimeline:function(a){return d(i,a)},getMentionsTimeline:function(a){return d(l,a)},getUserTimeline:function(a){return d(m,a)},searchTweets:function(a,b){return d(j,{q:a},b)},postStatusUpdate:function(a,b){return e(k,{status:a},b)},getUserDetails:function(a,b){return d(n,{user_id:a},b)},getRequest:d,postRequest:e}}]),angular.module("ngTwitter",["twitter.functions","twitter.utils"]),angular.module("twitter.utils",[]).factory("$twitterHelpers",["$q","$http",function(a,b){function c(a,b,c,d,f,g){if("undefined"!=typeof jsSHA){for(var h=angular.copy(c),i=Object.keys(d),j=0;j<i.length;j++)h[i[j]]=e(d[i[j]]);var k=a+"&"+encodeURIComponent(b)+"&",l=Object.keys(h).sort();for(j=0;j<l.length;j++)k+=j==l.length-1?encodeURIComponent(l[j]+"="+h[l[j]]):encodeURIComponent(l[j]+"="+h[l[j]]+"&");var m=new jsSHA(k,"TEXT"),n="";g&&(n=encodeURIComponent(g)),c.oauth_signature=encodeURIComponent(m.getHMAC(encodeURIComponent(f)+"&"+n,"TEXT","SHA-1","B64"));var o=Object.keys(c),p="OAuth ";for(j=0;j<o.length;j++)p+=j==o.length-1?o[j]+'="'+c[o[j]]+'"':o[j]+'="'+c[o[j]]+'",';return{signature_base_string:k,authorization_header:p,signature:c.oauth_signature}}return"Missing jsSHA JavaScript library"}function d(a){for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;a>d;d++)b+=c.charAt(Math.floor(Math.random()*c.length));return b}function e(a){var b=encodeURIComponent(a);return b=b.replace(/\!/g,"%21"),b=b.replace(/\'/g,"%27"),b=b.replace(/\(/g,"%28"),b=b.replace(/\)/g,"%29"),b=b.replace(/\*/g,"%2A")}function f(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+e(a[c]));return console.log(b.join("&")),b.join("&")}return{createTwitterSignature:function(a,e,f,g,h,i){var j={oauth_consumer_key:g,oauth_nonce:d(10),oauth_signature_method:"HMAC-SHA1",oauth_token:i.oauth_token,oauth_timestamp:Math.round((new Date).getTime()/1e3),oauth_version:"1.0"},k=c(a,e,j,f,h,i.oauth_token_secret);return b.defaults.headers.common.Authorization=k.authorization_header,k},transformRequest:f}}]);